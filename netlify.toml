# Netlify configuration for Maugli Blog
# Auto-copied from core-maugli package
# 
# üîß CUSTOMIZATION GUIDE:
# - Add "# CUSTOMIZED" comment anywhere to prevent auto-updates
# - Uncomment Bluesky/Supabase plugins after setup in Netlify UI
# - Add your own plugins and they'll be preserved automatically
#

[build]
  publish = "dist"
  command = "npm run build"

[build.environment]
  NODE_VERSION = "20"

# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è Astro
[[plugins]]
  package = "netlify-plugin-astro"

# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
[[plugins]]
  package = "@netlify/plugin-lighthouse"

[[plugins]]
  package = "netlify-plugin-image-optim"

[[plugins]]
  package = "netlify-plugin-minify-html"

[[plugins]]
  package = "netlify-plugin-submit-sitemap"

# –ü–ª–∞–≥–∏–Ω—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (—Ç—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
# –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Netlify UI:
# ‚ö†Ô∏è  –ü–æ—Å–ª–µ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —ç—Ç–æ—Ç —Ñ–∞–π–ª –Ω–µ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è

# Bluesky Custom Domain
# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: https://app.netlify.com/extensions/bluesky-custom-domain
# [[plugins]]
#   package = "netlify-plugin-bluesky"

# Supabase Integration  
# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: https://app.netlify.com/extensions/supabase
# [[plugins]]
#   package = "@supabase/netlify-integration"

# Redirects
[[redirects]]
  from = "/blog/feed.xml"
  to = "/rss.xml"
  status = 301

# Headers –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
[[headers]]
  for = "/*"
  [headers.values]
    "X-Frame-Options" = "DENY"
    "X-XSS-Protection" = "1; mode=block"
    "X-Content-Type-Options" = "nosniff"
    "Referrer-Policy" = "strict-origin-when-cross-origin"

# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
[[headers]]
  for = "/img/*"
  [headers.values]
    "Cache-Control" = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.webp"
  [headers.values]
    "Cache-Control" = "public, max-age=31536000, immutable"

